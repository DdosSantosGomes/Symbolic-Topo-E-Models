\documentclass[12pt,a4paper]{article}
\input{latexmacros.tex}
\input{../definitions.tex}

\graphicspath{{images/}{./}} % Specifies where to look for included images (trailing slash required)

\title{Topomodels in Haskell}
\author{David √Ålvarez Lombardi \and Paulius Skaisgiris}
\date{Sunday, 4 June 2023}
\hypersetup{pdfauthor={Me}, pdftitle={My Report}}

\begin{document}

\maketitle

\begin{abstract}
In this project, we provide a library for working with general topological spaces as well as topomodels for modal logic.
We also implement a well-known construction for converting topomodels to $\SFour$ Kripke models and back. We also implemented
correctness tests and benchmarks which are meant to be extended by users. Thus, this work serves as a solid starting point for investigating
hypotheses about general topology, modal logic, and their intersection.
\end{abstract}

\tableofcontents

\clearpage

\section{Introduction}

In \S \ref{sec:Syntax}, we describe the syntax of basic modal logic.
This will define the formal language used throughout the rest of the paper.
In \S \ref{sec:SetTheory}, we implement several functions that are necessary for working with relations, topologies, and generating arbitrary sets.
In \S \ref{sec:Topology}, we define a library for working with topological spaces.
In \S \ref{sec:Models} through \S \ref{sec:TopoModels} , we define the models for our modal language.
In \S \ref{sec:Semantics}, we define what it means for our formulas to be true on these models.
In \S \ref{sec:ModelConversion}, we define how to convert between these models.
Finally in \S \ref{sec:tests} and \S \ref{sec:Benchmarks} we describe how our library was tested and benchmarked.

\input{../../lib/Syntax.lhs}

\input{../../lib/SetTheory.lhs}

\input{../../lib/Topology.lhs}

\input{../../lib/Models.lhs}

\input{../../lib/KripkeModels.lhs}

\input{../../lib/TopoModels.lhs}

\input{../../lib/Semantics.lhs}

\input{../../lib/ModelConversion.lhs}

\input{../../test/tests.lhs}

\section{Benchmarks}\label{sec:Benchmarks}

To test the efficiency of our implementation and to investigate whether \verb|S4KripkeModel|'s
are more or less efficient than \verb|TopoModel|'s, we implemented a few benchmarks. The benchmark code
can be found in the directory \verb|bench|, we will omit them from the report for brevity. We have also
structured the benchmarks in a way that we deem them to be extendable easily.

First, we investigated the question "How efficient is arbitrary formula evaluation on \verb|S4KripkeModel|'s
as opposed to \verb|TopoModel|'s?". A single run of the benchmark consists of generating a \verb|S4KripkeModel|,
then converting to a \verb|TopoModel| and evaluating on an arbitrary formula. This was done 1000 times and the
results are pictured below.

\begin{center}
\includegraphics*[width=0.5\linewidth]{bench-formula-satisfaction.png}
\end{center}

Overall, \verb|TopoModel|'s seem to run a bit faster than \verb|S4KripkeModel|'s as can be seen from the boxplot.
Indeed, the median times reflect that - 8.3e-08 seconds and 7e-08 second respectively.
Is it, however, due to the size of the models? 580 out of 1000 times \verb|S4KripkeModel|'s were larger
than Topo Models. And so, the slight difference in formula evaluation speed must be due to
Kripke Models being larger.

Second, we investigated the question "How efficient is \verb|S4KripkeModel| vs. \verb|TopoModel| generation?".
We measured the generation of an arbitrary \verb|S4KripkeModel| and an arbitrary \verb|TopoModel|.
This was done 1000 times and the results are pictured below.

\begin{center}
\includegraphics*[width=0.5\linewidth]{bench-model-generation.png}
\end{center}

Generating arbitrary \verb|S4KripkeModel|'s (median of 3.65e-07 seconds) takes more time than \verb|TopoModel|'s
(median of 1.79e-07 seconds). With the current constraints of generation, we generate larger
\verb|S4KripkeModel|'s (823 out of 1000 runs) which also takes more time.

Lastly, we investigated the question "How efficient is the conversion from \verb|S4KripkeModel| to \verb|TopoModel|
and the other way around?". We measured the conversions in either direction.
This was done 1000 times and the results are pictured below.

\begin{center}
\includegraphics*[width=0.5\linewidth]{bench-model-conversion.png}
\end{center}

Converting from \verb|S4KripkeModel|'s to \verb|TopoModel|'s takes slightly longer (median of 8.1e-08 seconds)
compared to converting from \verb|TopoModel|'s to \verb|S4KripkeModel|'s back (median of 6.5e-08 seconds).
Similarly as previously, 582 out of 1000 times \verb|S4KripkeModel|'s were larger than Topo Models.
Even though the resulting \verb|TopoModel| is smaller than \verb|S4KripkeModel|'s, the process itself involves
working with the larger \verb|S4KripkeModel|, which most likely contributes the main runtime overhead.

In conclusion, the differences are somewhat marginal, but \verb|TopoModel|'s seem to represent a semantically
equivalent structure that may be sometimes more efficient to work with.

\section{Conclusion}
We believe this work provides useful and extensible implementations for working with general topology, Kripke models, and topomodels. As demonstrated
with the tests and benchmarks, it can be used to test properties of various mathematical structures, implementation details,
and their efficiency.

\addcontentsline{toc}{section}{Bibliography}
\bibliographystyle{abbrv}
\bibliography{references.bib}

\end{document}
